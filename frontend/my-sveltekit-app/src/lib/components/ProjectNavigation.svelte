<script lang=\"ts\">\n  import { createEventDispatcher } from 'svelte';\n  import type { NavigationPage, UIConfiguration } from '$lib/types';\n  \n  const dispatch = createEventDispatcher();\n  \n  // Props - project data with cloned configuration\n  export let hasNavigation: boolean = false;\n  export let totalPages: number = 1;\n  export let navigationPages: NavigationPage[] = [];\n  export let uiConfiguration: UIConfiguration = {};\n  export let currentPage: number = 1;\n  \n  function navigateToPage(pageNumber: number) {\n    if (pageNumber >= 1 && pageNumber <= totalPages) {\n      currentPage = pageNumber;\n      dispatch('pageChange', { pageNumber });\n    }\n  }\n  \n  function getPageConfig(pageNumber: number): NavigationPage {\n    return navigationPages.find(p => p.page_number === pageNumber) || {\n      page_number: pageNumber,\n      name: `Page ${pageNumber}`,\n      short_name: `Page ${pageNumber}`,\n      icon: 'fa-file',\n      features: []\n    };\n  }\n  \n  function getPageRoute(pageNumber: number): string {\n    const config = getPageConfig(pageNumber);\n    return config.name.toLowerCase().replace(/\\s+/g, '-');\n  }\n  \n  $: isDarkTheme = uiConfiguration.theme === 'dark';\n  $: isMultiPage = hasNavigation && totalPages > 1;\n</script>\n\n{#if isMultiPage}\n  <div class=\"project-navigation\" class:dark-theme={isDarkTheme}>\n    <div class=\"nav-container\">\n      <!-- Page Progress Indicator -->\n      <div class=\"page-progress\">\n        <div class=\"progress-bar\">\n          <div \n            class=\"progress-fill\" \n            style=\"width: {(currentPage / totalPages) * 100}%\"\n          ></div>\n        </div>\n        <span class=\"page-indicator\">\n          <i class=\"fas fa-layer-group\"></i>\n          Page {currentPage} of {totalPages}\n        </span>\n      </div>\n      \n      <!-- Navigation Tabs -->\n      <div class=\"nav-tabs\">\n        {#each navigationPages as pageConfig}\n          <button \n            class=\"nav-tab {currentPage === pageConfig.page_number ? 'active' : ''}\"\n            on:click={() => navigateToPage(pageConfig.page_number)}\n            title={pageConfig.name}\n          >\n            <div class=\"tab-icon\">\n              <i class=\"fas {pageConfig.icon}\"></i>\n            </div>\n            <div class=\"tab-content\">\n              <span class=\"tab-name\">{pageConfig.name}</span>\n              <span class=\"tab-short-name\">{pageConfig.short_name || pageConfig.name}</span>\n              {#if pageConfig.features && pageConfig.features.length > 0}\n                <span class=\"tab-features\">{pageConfig.features.length} features</span>\n              {/if}\n            </div>\n            {#if currentPage === pageConfig.page_number}\n              <div class=\"active-indicator\">\n                <i class=\"fas fa-check-circle\"></i>\n              </div>\n            {/if}\n          </button>\n        {/each}\n      </div>\n      \n      <!-- Navigation Controls -->\n      <div class=\"nav-controls\">\n        <button \n          class=\"nav-btn prev\"\n          disabled={currentPage <= 1}\n          on:click={() => navigateToPage(currentPage - 1)}\n          title=\"Previous page\"\n        >\n          <i class=\"fas fa-chevron-left\"></i>\n          <span>Previous</span>\n        </button>\n        \n        <div class=\"page-dots\">\n          {#each Array(totalPages) as _, index}\n            <button \n              class=\"page-dot {currentPage === index + 1 ? 'active' : ''}\"\n              on:click={() => navigateToPage(index + 1)}\n              title=\"Go to page {index + 1}\"\n            >\n              <span class=\"dot-number\">{index + 1}</span>\n            </button>\n          {/each}\n        </div>\n        \n        <button \n          class=\"nav-btn next\"\n          disabled={currentPage >= totalPages}\n          on:click={() => navigateToPage(currentPage + 1)}\n          title=\"Next page\"\n        >\n          <span>Next</span>\n          <i class=\"fas fa-chevron-right\"></i>\n        </button>\n      </div>\n    </div>\n  </div>\n{/if}\n\n<style>\n  .project-navigation {\n    background: white;\n    border-bottom: 1px solid #e5e7eb;\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\n    position: sticky;\n    top: 0;\n    z-index: 100;\n  }\n  \n  .project-navigation.dark-theme {\n    background: #1f2937;\n    border-color: #374151;\n  }\n  \n  .nav-container {\n    max-width: 1200px;\n    margin: 0 auto;\n    padding: 16px 24px;\n  }\n  \n  .page-progress {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    margin-bottom: 16px;\n  }\n  \n  .progress-bar {\n    flex: 1;\n    height: 4px;\n    background: #e5e7eb;\n    border-radius: 2px;\n    overflow: hidden;\n    margin-right: 16px;\n  }\n  \n  .progress-fill {\n    height: 100%;\n    background: linear-gradient(135deg, #002147, #1e3a5f);\n    transition: width 0.3s ease;\n  }\n  \n  .page-indicator {\n    font-size: 0.875rem;\n    color: #6b7280;\n    font-weight: 500;\n    white-space: nowrap;\n    display: flex;\n    align-items: center;\n    gap: 6px;\n  }\n  \n  .dark-theme .page-indicator {\n    color: #d1d5db;\n  }\n  \n  .nav-tabs {\n    display: flex;\n    gap: 8px;\n    margin-bottom: 16px;\n    overflow-x: auto;\n    padding-bottom: 8px;\n  }\n  \n  .nav-tab {\n    background: #f9fafb;\n    border: 2px solid #e5e7eb;\n    border-radius: 12px;\n    padding: 12px 16px;\n    cursor: pointer;\n    transition: all 0.2s ease;\n    display: flex;\n    align-items: center;\n    gap: 12px;\n    min-width: 140px;\n    flex-shrink: 0;\n    position: relative;\n  }\n  \n  .nav-tab:hover {\n    background: #f3f4f6;\n    border-color: #d1d5db;\n    transform: translateY(-2px);\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n  }\n  \n  .nav-tab.active {\n    background: linear-gradient(135deg, #002147, #1e3a5f);\n    border-color: #002147;\n    color: white;\n    box-shadow: 0 4px 16px rgba(0, 33, 71, 0.3);\n  }\n  \n  .dark-theme .nav-tab {\n    background: #374151;\n    border-color: #4b5563;\n    color: #f9fafb;\n  }\n  \n  .dark-theme .nav-tab:hover {\n    background: #4b5563;\n    border-color: #6b7280;\n  }\n  \n  .tab-icon {\n    width: 32px;\n    height: 32px;\n    background: rgba(0, 33, 71, 0.1);\n    border-radius: 8px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 0.875rem;\n    color: #002147;\n    flex-shrink: 0;\n  }\n  \n  .nav-tab.active .tab-icon {\n    background: rgba(255, 255, 255, 0.2);\n    color: white;\n  }\n  \n  .tab-content {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 2px;\n  }\n  \n  .tab-name {\n    font-size: 0.875rem;\n    font-weight: 600;\n    color: #111827;\n    line-height: 1.2;\n  }\n  \n  .nav-tab.active .tab-name {\n    color: white;\n  }\n  \n  .tab-short-name {\n    font-size: 0.75rem;\n    color: #6b7280;\n    display: none;\n  }\n  \n  .tab-features {\n    font-size: 0.625rem;\n    color: #9ca3af;\n    background: rgba(156, 163, 175, 0.1);\n    padding: 2px 6px;\n    border-radius: 8px;\n    line-height: 1;\n  }\n  \n  .nav-tab.active .tab-features {\n    color: rgba(255, 255, 255, 0.7);\n    background: rgba(255, 255, 255, 0.1);\n  }\n  \n  .active-indicator {\n    position: absolute;\n    top: -4px;\n    right: -4px;\n    width: 20px;\n    height: 20px;\n    background: #10b981;\n    border-radius: 50%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: white;\n    font-size: 0.625rem;\n    border: 2px solid white;\n  }\n  \n  .nav-controls {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n  }\n  \n  .nav-btn {\n    background: #f9fafb;\n    border: 1px solid #e5e7eb;\n    color: #374151;\n    padding: 8px 16px;\n    border-radius: 8px;\n    cursor: pointer;\n    transition: all 0.2s ease;\n    display: flex;\n    align-items: center;\n    gap: 6px;\n    font-size: 0.875rem;\n    font-weight: 500;\n  }\n  \n  .nav-btn:hover:not(:disabled) {\n    background: #f3f4f6;\n    border-color: #d1d5db;\n    transform: translateY(-1px);\n  }\n  \n  .nav-btn:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n  }\n  \n  .dark-theme .nav-btn {\n    background: #374151;\n    border-color: #4b5563;\n    color: #f9fafb;\n  }\n  \n  .dark-theme .nav-btn:hover:not(:disabled) {\n    background: #4b5563;\n    border-color: #6b7280;\n  }\n  \n  .page-dots {\n    display: flex;\n    gap: 4px;\n    align-items: center;\n  }\n  \n  .page-dot {\n    width: 32px;\n    height: 32px;\n    border-radius: 50%;\n    background: #f3f4f6;\n    border: 1px solid #e5e7eb;\n    cursor: pointer;\n    transition: all 0.2s ease;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 0.75rem;\n    font-weight: 600;\n    color: #6b7280;\n  }\n  \n  .page-dot:hover {\n    background: #e5e7eb;\n    border-color: #d1d5db;\n    transform: scale(1.1);\n  }\n  \n  .page-dot.active {\n    background: #002147;\n    border-color: #002147;\n    color: white;\n    transform: scale(1.2);\n  }\n  \n  .dot-number {\n    font-size: 0.75rem;\n    font-weight: 600;\n  }\n  \n  /* Responsive Design */\n  @media (max-width: 768px) {\n    .nav-container {\n      padding: 12px 16px;\n    }\n    \n    .nav-tabs {\n      flex-direction: column;\n      gap: 6px;\n    }\n    \n    .nav-tab {\n      min-width: auto;\n      width: 100%;\n    }\n    \n    .tab-short-name {\n      display: block;\n    }\n    \n    .tab-name {\n      display: none;\n    }\n    \n    .nav-controls {\n      flex-direction: column;\n      gap: 12px;\n    }\n    \n    .page-dots {\n      order: -1;\n    }\n  }\n  \n  @media (max-width: 480px) {\n    .nav-tab {\n      padding: 8px 12px;\n    }\n    \n    .tab-icon {\n      width: 24px;\n      height: 24px;\n    }\n    \n    .page-dot {\n      width: 28px;\n      height: 28px;\n    }\n  }\n</style>\n